import{r as n,j as e}from"./app-DjpVCp1Q.js";/* empty css            */const G={get:(t,i)=>{try{const r=localStorage.getItem(t);return r?JSON.parse(r):i}catch{return i}},set:(t,i)=>{try{localStorage.setItem(t,JSON.stringify(i))}catch{}}};function z({d:t,size:i=20,className:r="",...d}){return e.jsx("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,...d,children:Array.isArray(t)?t.map((m,x)=>e.jsx("path",{d:m},x)):e.jsx("path",{d:t})})}const g={plus:t=>e.jsx(z,{d:"M12 5v14M5 12h14",...t}),search:t=>e.jsx(z,{d:["M11 19a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z","M21 21l-4.35-4.35"],...t}),x:t=>e.jsx(z,{d:["M18 6L6 18","M6 6l12 12"],...t}),chevDown:t=>e.jsx(z,{d:"M6 9l6 6 6-6",...t}),chevLeft:t=>e.jsx(z,{d:"M15 18l-6-6 6-6",...t}),trash:t=>e.jsx(z,{d:["M3 6h18","M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2","M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"],...t}),edit:t=>e.jsx(z,{d:["M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],...t}),camera:t=>e.jsx(z,{d:["M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z","M12 17a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z"],...t}),package:t=>e.jsx(z,{d:["M16.5 9.4l-9-5.19","M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z","M3.27 6.96L12 12.01l8.73-5.05","M12 22.08V12"],...t}),minus:t=>e.jsx(z,{d:"M5 12h14",...t}),filter:t=>e.jsx(z,{d:["M22 3H2l8 9.46V19l4 2v-8.54L22 3"],...t}),image:t=>e.jsx(z,{d:["M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2Z","M8.5 10a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z","M21 15l-5-5L5 21"],...t}),check:t=>e.jsx(z,{d:"M20 6L9 17l-5-5",...t}),sort:t=>e.jsx(z,{d:["M11 5h10","M11 9h7","M11 13h4","M3 17l3 3 3-3","M6 18V4"],...t})};function U({src:t,alt:i="",size:r=48,className:d="",onClick:m}){const[x,u]=n.useState(!1),[h,l]=n.useState(!1);return!t||h?e.jsx("div",{onClick:m,className:`flex items-center justify-center bg-zinc-100 dark:bg-zinc-800 rounded-lg ${d}`,style:{width:r,height:r,minWidth:r},children:g.package({size:r*.4,className:"text-zinc-300 dark:text-zinc-600"})}):e.jsxs("div",{onClick:m,className:`relative overflow-hidden rounded-lg bg-zinc-100 dark:bg-zinc-800 ${d}`,style:{width:r,height:r,minWidth:r},children:[!x&&e.jsx("div",{className:"absolute inset-0 animate-pulse bg-zinc-200 dark:bg-zinc-700"}),e.jsx("img",{src:t,alt:i,loading:"lazy",className:`w-full h-full object-cover transition-opacity duration-200 ${x?"opacity-100":"opacity-0"}`,onLoad:()=>u(!0),onError:()=>l(!0)})]})}function $({photos:t,initial:i=0,onClose:r}){const[d,m]=n.useState(i),x=t[d];return n.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),e.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 flex flex-col",onClick:r,children:[e.jsxs("div",{className:"flex items-center justify-between p-3",children:[e.jsxs("span",{className:"text-white/60 text-sm",children:[d+1," / ",t.length]}),e.jsx("button",{onClick:r,className:"text-white/60 hover:text-white p-1",children:g.x({size:24})})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-2",onClick:u=>u.stopPropagation(),children:e.jsx("img",{src:x,alt:"",className:"max-w-full max-h-full object-contain rounded-lg"})}),t.length>1&&e.jsx("div",{className:"flex justify-center gap-3 p-4",children:t.map((u,h)=>e.jsx("button",{onClick:l=>{l.stopPropagation(),m(h)},className:`w-12 h-12 rounded-lg overflow-hidden border-2 transition-all ${h===d?"border-white":"border-transparent opacity-50"}`,children:e.jsx("img",{src:u,alt:"",className:"w-full h-full object-cover"})},h))})]})}function P({children:t,active:i,onClick:r,count:d}){return e.jsxs("button",{onClick:r,className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium whitespace-nowrap transition-all
        ${i?"bg-zinc-900 text-white dark:bg-white dark:text-zinc-900":"bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:[t,d!==void 0&&e.jsx("span",{className:`text-xs ${i?"text-white/60 dark:text-zinc-900/60":"text-zinc-400 dark:text-zinc-500"}`,children:d})]})}function F({value:t,onChange:i,min:r=0}){return e.jsxs("div",{className:"flex items-center gap-0 border border-zinc-200 dark:border-zinc-700 rounded-lg overflow-hidden",children:[e.jsx("button",{onClick:()=>i(Math.max(r,t-1)),className:"px-2.5 py-1.5 text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 active:bg-zinc-200 transition-colors",children:g.minus({size:14})}),e.jsx("span",{className:"px-3 py-1.5 text-sm font-semibold min-w-[2.5rem] text-center bg-zinc-50 dark:bg-zinc-800/50",children:t}),e.jsx("button",{onClick:()=>i(t+1),className:"px-2.5 py-1.5 text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 active:bg-zinc-200 transition-colors",children:g.plus({size:14})})]})}function H({filtered:t}){return e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:g.package({size:28,className:"text-zinc-300 dark:text-zinc-600"})}),e.jsx("p",{className:"text-zinc-900 dark:text-white font-semibold text-lg mb-1",children:t?"Nenhum item encontrado":"Estoque vazio"}),e.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm max-w-[240px]",children:t?"Tente buscar por outro termo ou limpe os filtros.":"Toque no botão + para adicionar seu primeiro item ao estoque."})]})}function O(t,i=800,r=.7){return new Promise((d,m)=>{const x=new FileReader;x.onload=u=>{const h=u.target?.result;if(typeof h!="string"){m(new Error("Failed to read file"));return}const l=new Image;l.onload=()=>{const j=document.createElement("canvas"),f=Math.min(i/l.width,i/l.height,1);j.width=l.width*f,j.height=l.height*f;const k=j.getContext("2d");if(!k){m(new Error("Failed to get canvas context"));return}k.drawImage(l,0,0,j.width,j.height),d(j.toDataURL("image/jpeg",r))},l.onerror=()=>m(new Error("Failed to load image")),l.src=h},x.onerror=()=>m(new Error("Failed to read file")),x.readAsDataURL(t)})}const p=()=>Date.now().toString(36)+Math.random().toString(36).slice(2,7),o=Date.now(),Z=[{id:p(),name:"Compressor 12.000 BTUs",category:"Compressores",qty:4,minQty:2,location:"Prateleira A1",notes:"Rotativo - Gás R-410A. Marca Embraco.",photos:[],createdAt:o-864e5*30,updatedAt:o-864e5*2},{id:p(),name:"Compressor 18.000 BTUs",category:"Compressores",qty:1,minQty:2,location:"Prateleira A1",notes:"Rotativo - Gás R-22. Verificar disponibilidade com fornecedor.",photos:[],createdAt:o-864e5*28,updatedAt:o-864e5*1},{id:p(),name:"Compressor 24.000 BTUs",category:"Compressores",qty:3,minQty:1,location:"Prateleira A2",notes:"Scroll - Gás R-410A. Copeland.",photos:[],createdAt:o-864e5*25,updatedAt:o-864e5*5},{id:p(),name:"Correia A-42",category:"Correias",qty:12,minQty:5,location:"Gaveta B3",notes:"Uso em motores de ventilação das condensadoras.",photos:[],createdAt:o-864e5*20,updatedAt:o-864e5*3},{id:p(),name:"Correia A-55",category:"Correias",qty:3,minQty:5,location:"Gaveta B3",notes:"Para fan coils de grande porte.",photos:[],createdAt:o-864e5*20,updatedAt:o-36e5*8},{id:p(),name:"Correia B-68",category:"Correias",qty:7,minQty:3,location:"Gaveta B4",notes:"Uso geral em motores trifásicos.",photos:[],createdAt:o-864e5*18,updatedAt:o-864e5*10},{id:p(),name:"Motor Ventilador 1/4 CV",category:"Motores",qty:2,minQty:1,location:"Depósito 2",notes:"Motor monofásico 220V. Eixo 12mm.",photos:[],createdAt:o-864e5*15,updatedAt:o-864e5*4},{id:p(),name:"Motor Ventilador 1/2 CV",category:"Motores",qty:0,minQty:1,location:"Depósito 2",notes:"ESGOTADO - Fazer pedido urgente! Motor trifásico 380V.",photos:[],createdAt:o-864e5*15,updatedAt:o-36e5*2},{id:p(),name:"Motor Ventilador 1 CV",category:"Motores",qty:1,minQty:1,location:"Depósito 2",notes:"Trifásico 380V. WEG W22.",photos:[],createdAt:o-864e5*14,updatedAt:o-864e5*7},{id:p(),name:"Hélice 400mm 3 Pás",category:"Hélices",qty:6,minQty:3,location:"Prateleira C1",notes:"Plástico reforçado. Encaixe eixo 12mm.",photos:[],createdAt:o-864e5*12,updatedAt:o-864e5*6},{id:p(),name:"Hélice 500mm 5 Pás",category:"Hélices",qty:2,minQty:2,location:"Prateleira C1",notes:"Alumínio. Para condensadoras de grande porte.",photos:[],createdAt:o-864e5*12,updatedAt:o-864e5*1},{id:p(),name:"Capacitor 25µF",category:"Componentes Elétricos",qty:15,minQty:5,location:"Gaveta D1",notes:"440V. Uso em motores monofásicos de compressor.",photos:[],createdAt:o-864e5*10,updatedAt:o-864e5*3},{id:p(),name:"Contator Tripolar 25A",category:"Componentes Elétricos",qty:4,minQty:2,location:"Gaveta D2",notes:"Bobina 220V. Schneider LC1D25.",photos:[],createdAt:o-864e5*8,updatedAt:o-864e5*2},{id:p(),name:'Filtro Secador 3/8"',category:"Componentes Frigorígenos",qty:8,minQty:4,location:"Prateleira E1",notes:"Solda. Para linhas de líquido até 3TR.",photos:[],createdAt:o-864e5*6,updatedAt:o-864e5*1},{id:p(),name:"Gás Refrigerante R-410A (11,3kg)",category:"Componentes Frigorígenos",qty:2,minQty:3,location:"Depósito 3 - Área ventilada",notes:"Cilindro descartável. Conferir validade na etiqueta.",photos:[],createdAt:o-864e5*4,updatedAt:o-36e5*5}];function W({item:t,categories:i,onSave:r,onDelete:d,onClose:m}){const x=!!t,[u,h]=n.useState(t?.name||""),[l,j]=n.useState(t?.category||""),[f,k]=n.useState(""),[y,S]=n.useState(!1),[v,V]=n.useState(t?.qty??1),[N,C]=n.useState(t?.minQty??0),[M,E]=n.useState(t?.notes||""),[w,q]=n.useState(t?.photos||[]),[Q,R]=n.useState(t?.location||""),L=n.useRef(null),[I,D]=n.useState(!1),B=async a=>{const b=Array.from(a.target.files||[]),T=await Promise.all(b.map(A=>O(A)));q(A=>[...A,...T].slice(0,5))},s=a=>q(b=>b.filter((T,A)=>A!==a)),c=()=>{if(!u.trim())return;const a=y&&f.trim()?f.trim():l;r({id:t?.id||p(),name:u.trim(),category:a,qty:v,minQty:N,notes:M.trim(),photos:w,location:Q.trim(),createdAt:t?.createdAt||Date.now(),updatedAt:Date.now()})};return e.jsxs("div",{className:"fixed inset-0 z-40 bg-white dark:bg-zinc-950 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-200 dark:border-zinc-800",children:[e.jsxs("button",{onClick:m,className:"flex items-center gap-1 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:[g.chevLeft({size:20}),e.jsx("span",{className:"text-sm",children:"Voltar"})]}),e.jsx("h2",{className:"font-semibold text-zinc-900 dark:text-white",children:x?"Editar Item":"Novo Item"}),e.jsx("button",{onClick:c,disabled:!u.trim(),className:"text-sm font-semibold text-zinc-900 dark:text-white disabled:opacity-30 transition-opacity",children:"Salvar"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"p-4 space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2 block",children:["Fotos (",w.length,"/5)"]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 -mx-4 px-4",children:[w.map((a,b)=>e.jsxs("div",{className:"relative shrink-0",children:[e.jsx("img",{src:a,alt:"",className:"w-20 h-20 rounded-xl object-cover"}),e.jsx("button",{onClick:()=>s(b),className:"absolute -top-1.5 -right-1.5 w-6 h-6 rounded-full bg-red-500 text-white flex items-center justify-center shadow-sm",children:g.x({size:12})})]},b)),w.length<5&&e.jsxs("button",{onClick:()=>L.current?.click(),className:"w-20 h-20 rounded-xl border-2 border-dashed border-zinc-300 dark:border-zinc-700 flex flex-col items-center justify-center gap-1 text-zinc-400 hover:border-zinc-400 dark:hover:border-zinc-600 transition-colors shrink-0",children:[g.camera({size:20}),e.jsx("span",{className:"text-[10px]",children:"Adicionar"})]}),e.jsx("input",{ref:L,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:B})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-1.5 block",children:"Nome *"}),e.jsx("input",{value:u,onChange:a=>h(a.target.value),placeholder:"Ex: Compressor 12.000 BTUs",className:"w-full px-3 py-2.5 rounded-xl border border-zinc-200 dark:border-zinc-700 bg-transparent text-zinc-900 dark:text-white placeholder:text-zinc-400 text-sm focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white/30 transition-shadow"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-1.5 block",children:"Categoria"}),y?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:f,onChange:a=>k(a.target.value),placeholder:"Nome da categoria",autoFocus:!0,className:"flex-1 px-3 py-2.5 rounded-xl border border-zinc-200 dark:border-zinc-700 bg-transparent text-zinc-900 dark:text-white placeholder:text-zinc-400 text-sm focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white/30 transition-shadow"}),e.jsx("button",{onClick:()=>{S(!1),k("")},className:"px-3 py-2 text-zinc-500 text-sm",children:"Cancelar"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[e.jsx(P,{active:!l,onClick:()=>j(""),children:"Sem categoria"}),i.map(a=>e.jsx(P,{active:l===a,onClick:()=>j(a),children:a},a))]}),e.jsxs("button",{onClick:()=>S(!0),className:"text-xs text-zinc-500 hover:text-zinc-900 dark:hover:text-white flex items-center gap-1 transition-colors",children:[g.plus({size:12})," Nova categoria"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-1.5 block",children:"Quantidade"}),e.jsx(F,{value:v,onChange:V})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-1.5 block",children:"Qtd. mínima"}),e.jsx(F,{value:N,onChange:C})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-1.5 block",children:"Localização"}),e.jsx("input",{value:Q,onChange:a=>R(a.target.value),placeholder:"Ex: Prateleira A3, Depósito 2",className:"w-full px-3 py-2.5 rounded-xl border border-zinc-200 dark:border-zinc-700 bg-transparent text-zinc-900 dark:text-white placeholder:text-zinc-400 text-sm focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white/30 transition-shadow"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-1.5 block",children:"Observações"}),e.jsx("textarea",{value:M,onChange:a=>E(a.target.value),placeholder:"Anotações, referências, detalhes...",rows:3,className:"w-full px-3 py-2.5 rounded-xl border border-zinc-200 dark:border-zinc-700 bg-transparent text-zinc-900 dark:text-white placeholder:text-zinc-400 text-sm focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white/30 resize-none transition-shadow"})]}),x&&t&&e.jsx("div",{className:"pt-4 border-t border-zinc-200 dark:border-zinc-800",children:I?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-center text-zinc-600 dark:text-zinc-400",children:"Tem certeza? Essa ação não pode ser desfeita."}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>D(!1),className:"py-2.5 rounded-xl text-sm font-medium border border-zinc-200 dark:border-zinc-700 text-zinc-600 dark:text-zinc-400",children:"Cancelar"}),e.jsx("button",{onClick:()=>d(t.id),className:"py-2.5 rounded-xl text-sm font-medium bg-red-500 text-white",children:"Confirmar"})]})]}):e.jsx("button",{onClick:()=>D(!0),className:"w-full py-2.5 rounded-xl text-red-500 text-sm font-medium hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors",children:"Excluir item"})})]}),e.jsx("div",{className:"h-8"})]})]})}function _({item:t,onEdit:i,onClose:r,onUpdateQty:d}){const[m,x]=n.useState(null),u=t.minQty>0&&t.qty<=t.minQty;return e.jsxs("div",{className:"fixed inset-0 z-40 bg-white dark:bg-zinc-950 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-200 dark:border-zinc-800",children:[e.jsxs("button",{onClick:r,className:"flex items-center gap-1 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:[g.chevLeft({size:20}),e.jsx("span",{className:"text-sm",children:"Voltar"})]}),e.jsxs("button",{onClick:()=>i(t),className:"flex items-center gap-1.5 text-sm text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:[g.edit({size:16}),"Editar"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[t.photos.length>0&&e.jsx("div",{className:"flex gap-2 overflow-x-auto p-4 pb-2 -mx-0",children:t.photos.map((h,l)=>e.jsx("img",{src:h,alt:"",onClick:()=>x(l),className:"w-28 h-28 rounded-xl object-cover shrink-0 cursor-pointer active:scale-95 transition-transform"},l))}),e.jsxs("div",{className:"p-4 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:t.name}),t.category&&e.jsx("span",{className:"inline-block mt-1 text-xs font-medium text-zinc-500 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 px-2 py-0.5 rounded-full",children:t.category})]}),e.jsx("div",{className:`p-4 rounded-2xl ${u?"bg-amber-50 dark:bg-amber-500/10 border border-amber-200 dark:border-amber-500/30":"bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"Quantidade"}),e.jsx("p",{className:`text-3xl font-bold mt-0.5 ${u?"text-amber-600 dark:text-amber-400":"text-zinc-900 dark:text-white"}`,children:t.qty}),u&&e.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-0.5",children:["Estoque baixo (mín: ",t.minQty,")"]})]}),e.jsx(F,{value:t.qty,onChange:h=>d(t.id,h)})]})}),e.jsxs("div",{className:"space-y-3",children:[t.location&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-zinc-100 dark:border-zinc-800",children:[e.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Localização"}),e.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:t.location})]}),t.minQty>0&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-zinc-100 dark:border-zinc-800",children:[e.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Qtd. mínima"}),e.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:t.minQty})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-zinc-100 dark:border-zinc-800",children:[e.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Atualizado"}),e.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:new Date(t.updatedAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),t.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-1.5 block",children:"Observações"}),e.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300 whitespace-pre-wrap leading-relaxed",children:t.notes})]})]})]}),m!==null&&e.jsx($,{photos:t.photos,initial:m,onClose:()=>x(null)})]})}function J({item:t,onClick:i}){const r=t.minQty>0&&t.qty<=t.minQty;return e.jsxs("button",{onClick:i,className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-zinc-50 dark:hover:bg-zinc-900/50 active:bg-zinc-100 dark:active:bg-zinc-800 transition-colors text-left",children:[e.jsx(U,{src:t.photos[0],alt:t.name,size:48}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-zinc-900 dark:text-white truncate",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.category&&e.jsx("span",{className:"text-xs text-zinc-400 dark:text-zinc-500 truncate",children:t.category}),t.location&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-zinc-300 dark:text-zinc-700",children:"·"}),e.jsx("span",{className:"text-xs text-zinc-400 dark:text-zinc-500 truncate",children:t.location})]})]})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsx("span",{className:`text-lg font-bold ${r?"text-amber-500":"text-zinc-900 dark:text-white"}`,children:t.qty}),r&&e.jsx("p",{className:"text-[10px] text-amber-500 font-medium",children:"BAIXO"})]})]})}function Y(){const[t,i]=n.useState(()=>G.get("stock_items",null)??Z),[r,d]=n.useState("list"),[m,x]=n.useState(null),[u,h]=n.useState(null),[l,j]=n.useState(""),[f,k]=n.useState(""),[y,S]=n.useState("name"),[v,V]=n.useState(!1),N=n.useRef(null);n.useEffect(()=>{G.set("stock_items",t)},[t]);const C=n.useMemo(()=>[...new Set(t.map(c=>c.category).filter(Boolean))].sort(),[t]),M=n.useMemo(()=>{const s={};return t.forEach(c=>{c.category&&(s[c.category]=(s[c.category]||0)+1)}),s},[t]),E=n.useMemo(()=>{let s=[...t];if(l){const c=l.toLowerCase();s=s.filter(a=>a.name.toLowerCase().includes(c)||a.category?.toLowerCase().includes(c)||a.location?.toLowerCase().includes(c)||a.notes?.toLowerCase().includes(c))}return f&&(s=s.filter(c=>c.category===f)),s.sort((c,a)=>y==="name"?c.name.localeCompare(a.name,"pt-BR"):y==="qty"?c.qty-a.qty:y==="recent"?a.updatedAt-c.updatedAt:0),s},[t,l,f,y]),w=n.useMemo(()=>t.filter(s=>s.minQty>0&&s.qty<=s.minQty).length,[t]),q=n.useCallback(s=>{i(c=>c.find(b=>b.id===s.id)?c.map(b=>b.id===s.id?s:b):[...c,s]),d("list"),h(null)},[]),Q=n.useCallback(s=>{i(c=>c.filter(a=>a.id!==s)),d("list"),h(null),x(null)},[]),R=n.useCallback((s,c)=>{i(a=>a.map(b=>b.id===s?{...b,qty:c,updatedAt:Date.now()}:b)),x(a=>a?.id===s?{...a,qty:c,updatedAt:Date.now()}:a)},[]),L=s=>{x(s),d("detail")},I=s=>{h(s||null),d("form")},D=()=>{h(null),d("form")};n.useEffect(()=>{v&&N.current?.focus()},[v]);const B={name:"A-Z",qty:"Quantidade",recent:"Recentes"};return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-zinc-950 text-zinc-900 dark:text-white max-w-lg mx-auto relative",children:[e.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-950/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50",children:[e.jsxs("div",{className:"px-4 pt-3 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"Estoque"}),e.jsxs("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-0.5",children:[t.length," ",t.length===1?"item":"itens",w>0&&e.jsxs("span",{className:"text-amber-500 ml-1",children:["· ",w," baixo",w>1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>V(!v),className:`p-2 rounded-xl transition-colors ${v?"bg-zinc-100 dark:bg-zinc-800":"hover:bg-zinc-100 dark:hover:bg-zinc-800"}`,children:g.search({size:18,className:"text-zinc-600 dark:text-zinc-400"})}),e.jsxs("button",{onClick:()=>S(s=>s==="name"?"qty":s==="qty"?"recent":"name"),className:"p-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors flex items-center gap-1",children:[g.sort({size:18,className:"text-zinc-600 dark:text-zinc-400"}),e.jsx("span",{className:"text-[10px] font-medium text-zinc-400",children:B[y]})]})]})]}),v&&e.jsxs("div",{className:"mt-2 relative",children:[g.search({size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400"}),e.jsx("input",{ref:N,value:l,onChange:s=>j(s.target.value),placeholder:"Buscar por nome, categoria, local...",className:"w-full pl-9 pr-8 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-800 text-sm text-zinc-900 dark:text-white placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-300 dark:focus:ring-zinc-600 transition-shadow"}),l&&e.jsx("button",{onClick:()=>j(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-zinc-400 hover:text-zinc-600",children:g.x({size:14})})]})]}),C.length>0&&e.jsxs("div",{className:"flex gap-1.5 overflow-x-auto px-4 pb-2.5 no-scrollbar",children:[e.jsx(P,{active:!f,onClick:()=>k(""),count:t.length,children:"Todos"}),C.map(s=>e.jsx(P,{active:f===s,onClick:()=>k(f===s?"":s),count:M[s],children:s},s))]})]}),e.jsx("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800/50",children:E.length===0?e.jsx(H,{filtered:!!(l||f)}):E.map(s=>e.jsx(J,{item:s,onClick:()=>L(s)},s.id))}),e.jsx("div",{className:"h-24"}),e.jsx("button",{onClick:D,className:"fixed bottom-6 right-6 w-14 h-14 rounded-2xl bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 flex items-center justify-center shadow-lg shadow-zinc-900/30 dark:shadow-black/40 active:scale-95 transition-transform z-30 max-w-lg",style:{right:"max(1.5rem, calc((100vw - 32rem) / 2 + 1.5rem))"},children:g.plus({size:24})}),r==="detail"&&m&&e.jsx(_,{item:t.find(s=>s.id===m.id)||m,onEdit:s=>I(s),onClose:()=>{d("list"),x(null)},onUpdateQty:R}),r==="form"&&e.jsx(W,{item:u,categories:C,onSave:q,onDelete:Q,onClose:()=>{d("list"),h(null)}}),e.jsx("style",{children:`
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      `})]})}export{Y as default};
